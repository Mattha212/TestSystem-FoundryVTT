<form class="actor-sheet" autocomplete="off" form data-sheet-part="form" method="POST">
    <header class="sheet-header">
        <div class="portrait">
            <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
        </div>
        <div class="char-info">
            <input type="text" name="system.playerName" value="{{system.playerName}}"/>Player name
            <input type="text" name="name" value="{{actor.name}}"/>Character name
            <input type="text" name="system.characterGender" value="{{system.characterGender}}"/>Gender
            <input type="number" name="system.age" value="{{system.age}}"/>Age
            <label for="culture">Culture :</label>
            <select name="system.culture" id="culture">
            <option value="">-- Sélectionne une culture --</option>
            {{#each cultures}}
                <option value="{{this.name}}" {{#if (eq ../system.culture this.name)}}selected{{/if}}>
                {{this.name}}
                </option>
            {{/each}}
            </select>
            <label for="subculture">Sous-culture :</label>
            <select name="system.subculture" id="subculture">
            <option value="">-- Sélectionne une sous-culture --</option>
            {{#each subcultures}}
                <option value="{{this.name}}" {{#if (eq ../system.subculture this.name)}}selected{{/if}}>
                {{this.name}}
                </option>
            {{/each}}
            </select>
        </div>
        <div class="traits">
            <ol class="trait-list">
                {{#each traits}}   
                <li class="trait" data-item-id="{{this.id}}">
                <span class="trait-name">{{this.name}}</span>
                <button type="button" class="delete-trait" data-action="deleteTrait" data-trait-id="{{this.id}}">Remove trait</button>
                </li>
                {{/each}}
            </ol>
        </div>
    </header>
    <section class ="sheet-stats">
        {{#each system.stats as |stat key|}}
        <div class = "stat-block">
            <button type="button" class = "stat-roll" data-action = "statRoll" data-stat="{{key}}">{{stat.Label}}</button>
            <div class="stat-values">
                <input type="number" name="system.stats.{{key}}.MaxValue" value = "{{stat.MaxValue}}"/>
                <span>/</span>
            {{#if (or (eq key "Constitution") (eq key "Vigor"))}}
            <input type="number" name="system.stats.{{key}}.CurrentValue" value="{{stat.CurrentValue}}" />
            {{else}}
            <span class="CurrentValues">{{stat.CurrentValue}}</span>
            {{/if}}
            </div>
        </div>        
        {{/each}}
    </section>
    <nav class="tabs sheet-tabs" data-group="primary">
        <a class="item" data-tab="skillsTab" data-action="changeTab">Skills</a>
        <a class="item" data-tab="fightingTab" data-action="changeTab">Fighting</a>
        <a class="item" data-tab="inventoryTab" data-action="changeTab">Inventory</a>
    </nav>
 
<section class="sheet-body" data-application-part="body">
  <div class="tab {{tabs.skillsTab.cssClass}}" data-tab="{{tabs.skillsTab.id}}" data-group="{{tabs.skillsTab.group}}" data-part="{{tabs.skillsTab.id}}">
    {{#each skills as |category categoryName|}}
      <div class="CategoryTitle">{{handleNames categoryName}}</div>
      <div class="skills">
        <div class="skills-header">
          <span></span>  
          <span>Level</span>
          <span>Learning Points</span>
        </div>
        <div class="skills-header-filler"></div>
        {{#each category as |skill skillname|}}
          <div class="skill-block">
            <button type="button" class="skill-roll" data-action="skillRoll" data-skillkey="{{skillname}}" data-category="{{handleNames categoryName}}">
              {{handleNames skillname}}
            </button>
            <div class="skill-input">
              <input type="number" name="system.skills.{{categoryName}}.{{skillname}}.level" value="{{skill.level}}"/>
            </div>
            <div class="skill-input">
              <input type="number" name="system.skills.{{categoryName}}.{{skillname}}.learningPoints" value="{{skill.learningPoints}}"/>
            </div>
          </div>
        {{/each}}
      </div>
    {{/each}}
  </div>

  {{!-- Fighting Tab --}}
  <div class=" tab {{tabs.fightingTab.cssClass}}" data-tab="{{tabs.fightingTab.id}}" data-group="{{tabs.fightingTab.group}}" data-part="{{tabs.fightingTab.id}}">
    <div class="fighting-defense">
      <div class="shield">
        <span>Shields</span>
        {{#each shields}}
            <li class="shield item" data-item-id="{{this.id}}">
            <span class="shield-name">{{this.name}}</span>
            <span class="shield-weight">{{this.system.weight}} kg</span>
            <span class="shield-protection">{{this.system.protection}}</span>
            <span class="shield-bulk">{{this.system.bulk}}</span>
            <span class="shield-cost">{{this.system.cost}}</span>
            <button type = "button" class="delete-item" data-action="deleteItem" data-item-id="{{this.id}}">Remove</button>
            <button type = "button" class = "equipped-item" data-action="equipItem" data-item-type = "{{this.type}}" data-item-id="{{this.id}}">Equip</button>
          </li>
        {{/each}}
      </div>
      <div class="bulk">
        <span>Bulk</span>
        {{bulk}}
      </div>
      <div class="protection">
        <span>Protection</span>
        {{protection}}
      </div>
      <div class="armor">
        <span>Armors</span>
        {{#each armors}}
            <li class="armor item" data-item-id="{{this.id}}">
            <span class="armor-name">{{this.name}}</span>
            <span class="armor-weight">{{this.system.weight}} kg</span>
            <span class="armor-protection">{{this.system.protection}}</span>
            <span class="armor-bulk">{{this.system.bulk}}</span>
            <span class="armor-type">{{this.system.type}}</span>
            <span class="armor-cost">{{this.system.cost}}</span>
            <button type = "button" class = "equipped-item" data-action="equipArmor" data-item-type = "{{this.type}}" data-item-id="{{this.id}}">Equip</button>
            <button type = "button" class="unequipped-item" data-action="unequipArmor" data-item-type = "{{this.type}}" data-item-id="{{this.id}}">Unequip</button>
            <button type = "button" class="delete-item" data-action="deleteItem" data-item-type = "{{this.type}}" data-item-id="{{this.id}}">Remove</button>
          </li>
        {{/each}}
      </div>
    </div>
  </div>

  {{!-- Inventory Tab --}}
  <div class="tab {{tabs.inventoryTab.cssClass}}" data-tab="{{tabs.inventoryTab.id}}" data-group="{{tabs.inventoryTab.group}}" data-part="{{tabs.inventoryTab.id}}">
    <ol class="item-list">
      {{#each objects}}
        <li class="item" data-item-id="{{this.id}}">
          <span class="itemName">{{this.name}}</span>
          <span class="item-weight">{{this.system.weight}} kg</span>
        </li>
      {{/each}}
    </ol>
  </div>
</section>
</form>
