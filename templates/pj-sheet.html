<form class="actor-sheet" autocomplete="off">
    <header class="sheet-header">
        <div class="portrait">
            <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
        </div>
        <div class="char-info">
            <input type="text" name = "system.playerName" value="{{system.playerName}}"/>Player name
            <input type="text" name = "name" value = "{{actor.name}}"/>Character name
            <input type="text" name= "system.characterGender" value = "{{system.characterGender}}"/>Gender
            <input type="number" name="system.age" value="{{system.age}}"/>Age
            <label for="culture">Culture :</label>
            <select name="system.culture" id="culture">
            <option value="">-- Sélectionne une culture --</option>
            {{#each cultures}}
                <option value="{{this.name}}" {{#if (eq ../system.culture this.name)}}selected{{/if}}>
                {{this.name}}
                </option>
            {{/each}}
            </select>
            <label for="subculture">Sous-culture :</label>
            <select name="system.subculture" id="subculture">
            <option value="">-- Sélectionne une sous-culture --</option>
            {{#each subcultures}}
                <option value="{{this.name}}" {{#if (eq ../system.subculture this.name)}}selected{{/if}}>
                {{this.name}}
                </option>
            {{/each}}
            </select>
        </div>
        <div class="traits">
            <ol class="trait-list">
                {{#each traits}}   
                <li class="trait" data-item-id="{{this.id}}">
                <span class="trait-name">{{this.name}}</span>
                <button type="button" class="delete-trait" data-action="deleteTrait" data-trait-id="{{this.id}}">Remove trait</button>
                </li>
                {{/each}}
            </ol>
        </div>
    </header>
    <section class ="sheet-stats">
        {{#each system.stats as |stat key|}}
        <div class = "stat-block">
            <button type="button" class = "stat-roll" data-action = "statRoll" data-stat="{{key}}">{{stat.Label}}</button>
            <div class="stat-values">
                <input type="number" name="system.stats.{{key}}.MaxValue" value = "{{stat.MaxValue}}"/>
                <span>/</span>
            {{#if (or (eq key "Constitution") (eq key "Vigor"))}}
            <input type="number" name="system.stats.{{key}}.CurrentValue" value="{{stat.CurrentValue}}" />
            {{else}}
            <span class="CurrentValues">{{stat.CurrentValue}}</span>
            {{/if}}
            </div>
        </div>        
        {{/each}}
    </section>
    <nav class="tabs sheet-tabs" data-group="{{tabs.tabs.group}}">
        <a class="item {{tabs.tabs.cssClass 'Skills'}}" data-tab="Skills">Skills</a>
        <a class="item {{tabs.tabs.cssClass 'Fighting'}}" data-tab="Fighting">Fighting</a>
        <a class="item {{tabs.tabs.cssClass 'Inventory'}}" data-tab="Inventory">Inventory</a>
    </nav>
 
    <section class="sheet-body" data-group="{{tabs.tabs.group}}">
        <div class="tab skills-tab {{tabs.tabs.cssClass 'Skills'}}" data-tab="Skills" data-group="{{tabs.tabs.group}}" >
            {{#each skills as |category categoryName|}}
                <div class="CategoryTitle">{{handleNames categoryName}}</div>
                <div class="skills">
                    {{#each category as |skill skillname|}}
                        <div class = "skill-block">
                            <button type="button" class = "skill-roll" data-action="skillRoll" data-skillkey="{{skillname}}" data-category ="{{handleNames categoryName}}">
                                {{ handleNames skillname}}
                            </button>
                            <div class="skill-input">
                                <label>Level</label>
                                <input type = "number" name = "system.skills.{{categoryName}}.{{skillname}}.level" value="{{skill.level}}"/>
                            </div>

                            <div class="skill-input">
                                <label>Learning Points</label>
                                <input type = "number" name = "system.skills.{{categoryName}}.{{skillname}}.learningPoints" value="{{skill.learningPoints}}"/>
                            </div>
                        </div>
                    {{/each}}
                </div>
            {{/each}}
        </div>
        <div class="tab fighting-tab {{tabs.tabs.cssClass 'Fighting'}}" data-tab="Fighting" data-group="{{tabs.tabs.group}}">
            <div class ="fighting-defense">
                <div class ="shield">

                </div>
                <div class ="encombrement">
                    
                </div>
                <div class ="armor">

                </div>

            </div>
        </div>
        <div class="tab inventory-tab {{tabs.tabs.cssClass 'Inventory'}}" data-tab="Inventory" data-group ="{{tabs.tabs.group}}">
                <ol class="item-list">
                {{#each objects}}   
                <li class="item" data-item-id="{{this.id}}">
                <span class="itemName">{{this.name}}</span>
                <span class="item-weight">{{this.system.weight}} kg</span>
                </li>
                {{/each}}
            </ol>
        </div>
    </section>
</form>
